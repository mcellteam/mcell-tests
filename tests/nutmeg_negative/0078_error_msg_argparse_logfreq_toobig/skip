TODO FIX: on gcc 6, 64-bit on Windows has for some reason ULONG_MAX 32-bit anbut on Linux it is 64-bit  